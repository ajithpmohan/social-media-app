version: '3.7'

services:
  account:
    build: ./services/account/
    image: docker.pkg.github.com/ajithpmohan/social-media-app/account:1.0
    container_name: account
    volumes:
      - ./services/account:/usr/src/app
      - /usr/src/app/node_modules
    ports:
      - "5000:5000"
    # Port 9229 is the default NodeJS debugging port.
    expose:
      - 9229
  feed:
    build: ./services/feed/
    image: docker.pkg.github.com/ajithpmohan/social-media-app/feed:1.0
    container_name: feed
    volumes:
      - ./services/feed:/usr/src/app
      - /usr/src/app/node_modules
    ports:
      - "5001:5000"
    # Port 9229 is the default NodeJS debugging port.
    expose:
      - 9229
    depends_on:
      - account
    links:
      - account
